<!DOCTYPE html>
<html>
<head>
  <title>Feedback Urgency Tracker</title>
  <style>
    body {
      font-family: system-ui;
      background: #f5f5f5;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: auto;
    }
    h1 {
      margin-bottom: 10px;
    }
    .card {
      background: white;
      padding: 20px;
      margin-bottom: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,.1);
    }
    .score {
      float: right;
      font-size: 28px;
      font-weight: bold;
      color: #f38020;
    }
    .sources span {
      background: #e0e0e0;
      padding: 4px 10px;
      border-radius: 12px;
      margin-right: 5px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üö® Feedback Urgency Tracker</h1>
    <p>AI-powered complaint deduplication & prioritization</p>
    <div id="feedback">Loading feedback‚Ä¶</div>
  </div>

  <script>
    fetch('/api/feedback')
      .then(res => res.json())
      .then(data => {
        document.getElementById('feedback').innerHTML = data.map((item, i) => `
          <div class="card">
            <div class="score">${item.urgency_score}</div>
            <h3>#${i + 1} ${item.title}</h3>
            <p>
              üìä ${item.count} reports |
              üëç ${item.total_upvotes} upvotes |
              üïí ${new Date(item.latest_timestamp).toLocaleDateString()}
            </p>
            <div class="sources">
              ${item.sources.map(s => `<span>${s}</span>`).join('')}
            </div>
          </div>
        `).join('');
      })
      .catch(err => {
        document.getElementById('feedback').innerHTML =
          '<div class="card">Error loading feedback</div>';
        console.error(err);
      });
  </script>
</body>
</html>
